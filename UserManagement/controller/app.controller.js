sap.ui.define(["sap/ui/core/mvc/Controller","jquery.sap.global","sap/ui/core/Fragment","sap/ui/model/json/JSONModel","sap/m/ResponsivePopover","sap/m/MessagePopover","sap/m/ActionSheet","sap/m/Button","sap/m/Link","sap/m/Bar","sap/ui/layout/VerticalLayout","sap/m/NotificationListItem","sap/m/MessagePopoverItem","sap/ui/core/CustomData","sap/m/MessageToast","sap/ui/Device","inhance/userManagementSecurity/util/formatter"],function(e,t,o,i,s,a,n,r,l,u,g,p,d,c,m,v,f){"use strict";return e.extend("inhance.userManagementSecurity.controller.app",{formatter:f,onInit:function(){var e=this;var t=new sap.ui.model.json.JSONModel({busy:true,delay:0,layout:"OneColumn",previousLayout:"",sideContent:this.getView().byId("sideNavigationList"),loginUserName:"",loginUserPassword:"",menuTabsVisibility:true,sideMenuVisible:false,actionButtonsInfo:{midColumn:{fullScreen:false}}});if(window.hasher.getURL().indexOf("ondemand.com")>-1)t.setProperty("/destination","/BrevoMongoDB");else t.setProperty("/destination","");this.getView().setModel(t,"appView");this.sideNavClose();if(!this.valueHelpForUserProfile)this.valueHelpForUserProfile=new sap.ui.xmlfragment("inhance.userManagementSecurity.fragments.valueHelpForUserProfile",this);this.getView().addDependent(this.valueHelpForUserProfile);var o=e.getView().byId("sideNavigationList").getItem().getItems();for(var i=0;i<o.length;i++){if(o[i].getKey()=="home"){e.getView().byId("sideNavigationList").setSelectedItem(o[i]);break}}if(window.history.length!=1&&window.localStorage.getItem("loginDetails")!=null&&window.localStorage.getItem("loginDetails")!="null"){this.getView().getModel("appView").setProperty("/loginDetails",JSON.parse(window.localStorage.getItem("loginDetails")));var s=sap.ui.core.UIComponent.getRouterFor(this);s.navTo("Home")}},_objPatternMatched:function(){},getRouter:function(){return sap.ui.core.UIComponent.getRouterFor(this)},onItemSelect:function(e){var t=e.getParameter("item");var o=t.getKey();this.getView().getModel("appView").setProperty("/layout","OneColumn");if(o==="home"){this.sideNavClose();this.getRouter().navTo("Home")}else if(o==="users"){this.getRouter().navTo("usersMaster")}else if(o==="groups"){this.getRouter().navTo("groups")}else if(o==="roles"){this.getRouter().navTo("rolesMaster")}else if(o==="Super Admin"){this.getRouter().navTo("adminMaster")}else if(o==="Application"){this.getRouter().navTo("applicationList")}},onSideNavButtonPress:function(){var e=this.getView().byId("app");var t=e.getSideExpanded();this._setToggleButtonTooltip(t);e.setSideExpanded(!t)},sideNavClose:function(){var e=this.getView().byId("app");var t=e.getSideExpanded();this._setToggleButtonTooltip(t);e.setSideExpanded(false)},_setToggleButtonTooltip:function(e){var t=this.getView().byId("sideNavigationToggleButton");if(e){t.setTooltip("Large Size Navigation")}else{t.setTooltip("Small Size Navigation")}},_createNotification:function(e,t){var o=t.getObject();var i=new p({title:o.title,description:o.description,priority:o.priority,close:function(e){var t=e.getSource().getCustomData()[0].getValue();var o=t.split("/").pop();var i=e.getSource().getModel("alerts").getProperty("/alerts/notifications");i.splice(o,1);e.getSource().getModel("alerts").setProperty("/alerts/notifications",i);e.getSource().getModel("alerts").updateBindings("/alerts/notifications");sap.m.MessageToast.show("Notification has been deleted.")},datetime:o.date,authorPicture:o.icon,press:function(){},customData:[new c({key:"path",value:t.getPath()})]});return i},_createError:function(e,t){var o=t.getObject();var i=new l("moreDetailsLink",{text:"More Details",press:function(){m.show("More Details was pressed")}});var s=new d({title:o.title,subtitle:o.subTitle,description:o.description,counter:o.counter,link:i});return s},handleLogoutPress:function(){var e=this;$.post("/BrevoMongoDB/logout",{},function(t){if(JSON.parse(t).logout){e.getView().getModel("appView").setProperty("/layout","OneColumn");var o=sap.ui.core.UIComponent.getRouterFor(e);o.navTo("login");function i(){window.history.forward()}setTimeout("preventBack()",0);window.onunload=function(){null};window.localStorage.removeItem("loginDetails")}})},handleUserProfilePress:function(e){this.valueHelpForUserProfile.openBy(e.getSource())}})});